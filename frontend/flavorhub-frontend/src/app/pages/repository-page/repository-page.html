<app-toolbar-menu></app-toolbar-menu>

<div class="title-section">
  <h1 class="repo-title">Repository</h1>
  <div class="title-line"></div>
  <button class="add-repo-btn" (click)="toggleModal()">Add Repository</button>
</div>

<!-- Cards -->
<div class="cards-container">
  <div class="repo-card" *ngFor="let repo of repos()">

    <!-- Three dots -->
    <div class="dots-wrapper" (click)="$event.stopPropagation()">
      <button class="dots-btn" (click)="toggleMenu($event, repo)">‚ãÆ</button>

      <div class="dots-menu" *ngIf="repo.showMenu" (click)="$event.stopPropagation()">
        <button class="menu-item" (click)="editRepo($event, repo)">Edit</button>
        <button class="menu-item" (click)="deleteRepo($event, repo)">Delete</button>
      </div>
    </div>

    <!-- Title -->
    <h2 class="card-title">{{ repo.title }}</h2>

    <!-- Image -->
    <img class="repo-image" [src]="repo.image" alt="">

    <!-- Ingredients -->
    <div class="card-section">
      <h3 class="section-label">Ingredients</h3>
      <p class="section-text">{{ repo.ingredience }}</p>
    </div>

    <!-- Dish Type -->
    <div class="card-section">
      <h3 class="section-label">Dish Type</h3>
      <p class="section-text">{{ repo.dishType }}</p>
    </div>

    <!-- Description -->
    <div class="card-section">
      <h3 class="section-label">Description</h3>
      <p class="description-textarea">{{ repo.description }}</p>
    </div>

    <!-- Likes / Dislikes -->
    <div class="likes-container">
      <button class="like-btn" (click)="likeRepo(repo)">üëç {{ repo.likes }}</button>
      <button class="dislike-btn" (click)="dislikeRepo(repo)">üëé {{ repo.dislikes }}</button>
    </div>

  </div>
</div>


<!-- Modal -->
<div class="modal-backdrop" [class.show]="modalVisible()" (click)="toggleModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    
    <!-- Title -->
    <div class="modal-title">
      <input type="text" placeholder="Enter title..." class="modal-title-input"
             [value]="title()" (input)="title.set($any($event.target).value)" />
    </div>

    <!-- Image -->
    <div class="modal-image" (click)="fileInput.click()">
      <input type="file" #fileInput (change)="onImageSelected($event)" accept="image/*" hidden />
      <span [hidden]="selectedImage()">Click to select an image</span>
      <img [hidden]="!selectedImage()" [src]="selectedImage()" class="preview-image" />
    </div>

    <div class="modal-body">

      <!-- Ingredience -->
      <p class="modal-body-text">Ingredience</p>
      <div class="modal-body-line"></div>
      <input type="text" placeholder="Enter ingredient..." class="modal-title-input ingredience-input"
             [value]="ingredience()" (input)="ingredience.set($any($event.target).value)" />

      <!-- Dish Type (now input) -->
      <p class="modal-body-text dish-type-text">Dish type</p>
      <div class="modal-body-line dish-type-line"></div>
      <input type="text" placeholder="Enter dish type..." class="modal-title-input ingredience-input"
             [value]="dishType()" (input)="dishType.set($any($event.target).value)" />

      <!-- Description (NEW textarea) -->
      <p class="modal-body-text description-text">Description</p>
      <div class="modal-body-line description-line"></div>
      <textarea placeholder="Enter description..." class="modal-title-textarea description-input"
                [value]="description()" (input)="description.set($any($event.target).value)">
      </textarea>

      <button class="confirm-btn" (click)="confirmRepo()">Confirm</button>
    </div>
  </div>
</div>




















